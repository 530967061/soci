<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>SOCI - structure</title>
</head>
<body>
<font size="+3"><span
 style="font-family: helvetica,arial,sans-serif; font-weight: bold; color: rgb(0, 0, 255);">SOCI</span></font><br>
<span
 style="font-family: helvetica,arial,sans-serif; color: rgb(0, 0, 255); font-weight: bold;">The
C++ Database Access Library</span><span
 style="font-family: helvetica,arial,sans-serif; color: rgb(0, 0, 255);"><br>
<br>
</span>
<h3><span style="font-weight: bold;"></span>Library structure, files
and compilation</h3>
The SOCI library has the following structure:<br>
<br>
<div style="text-align: left;"><img alt="" src="structure.png"
 style="width: 502px; height: 444px;"><br>
</div>
<br>
The core part of the library and the backend interface definition are
placed in the <code>core</code> directory of the library distribution.
The
<code>soci-backend.h</code> file is an internal abstract
interface to the actual backends, which are needed to perform
operations on the given database server. Normally, the C++ client
program needs to interface with the <code>soci.h</code> header and the
header(s) relevant to the given backend(s) (for example, <code>soci-oracle.h</code>).
It is possible for the same program to use many backends at the same
time.<br>
The gray boxes above indicate that the SOCI library is extensible and
that there are two aspects of this extensibility: more backends can be
added, and more interfaces (possibly for other languages) can be
defined to reuse the already existing backends.<br>
<p>Everything in SOCI is
declared in the namespace <code>SOCI</code>.
All code examples presented in this documentation assume that your code
begins with something
like:<br>
</p>
<table style="width: 100%; background-color: silver; text-align: left;"
 border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;">
      <pre>#include "soci.h"<br>// other includes<br><br>using namespace SOCI;<br><br>// ...</pre>
      </td>
    </tr>
  </tbody>
</table>
<br>
<span style="font-weight: bold;">Note:</span> in simple programs, <code>#include</code>
for the relevant
backend is needed only in the file where the <code>Session</code>
object is created, because it is where the name of the backend factory
is referenced. The example program on the <a href="index.html">previous
page</a> shows the appropriate <code>#include</code> directive for the
Oracle backend.<br>
<br>
Compilation of the client program requires that the SOCI header files
are all visible and accessible to the compiler. Moreover, the library
itself (the core part and the relevant backend part) needs to be
already compiled and linked into
the final executable. For this, the native libraries provided by each
database server should be visible to the compiler and linker as well -
the
actual steps that need to be taken depend on the compiler being used.<br>
<br>
The <code>core</code> directory of the library distribution contains
the <code>Makefile</code> that can be used to compile the core part of
the library. Run <code>make</code> or <code>make shared</code> to get
the static and shared versions. Similarly, the <code>backends/<span
 style="font-style: italic;">name</span></code> directory contains the
backend part for each supported backend with the appropriate <code>Makefile</code>
and the <code>backends/<span style="font-style: italic;">name</span>/test</code>
directory contains the test program for the given backend.<br>
For example, the simplest way to compile the static version of the
library and the test program for PostgreSQL is:<br>
<br>
<table style="width: 100%; background-color: silver; text-align: left;"
 border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;">
      <pre>$ cd core<br>$ make<br>$ cd ../backends/postgresql<br>$ make<br>$ cd test<br>$ make</pre>
      </td>
    </tr>
  </tbody>
</table>
<span style="font-weight: bold;"><br>
Note:</span> for each backend and its test program, the <code>Makefile</code>s
contain the variables that can have values specific to the given
environment. These variables are placed at the beginning of the <code>Makefile</code>s.
Please review their values in case of any compilation problems.<br>
<br>
The Makefiles for test programs can be a good starting point to find
out correct compiler and linker options.<br>
<br>
<table style="width: 100%; text-align: left;" border="0" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;"><a href="index.html">Previous
(Contents)</a><br>
      </td>
      <td style="vertical-align: top; text-align: right;"><a
 href="errors.html">Next (Errors)</a><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<hr style="width: 100%; height: 2px;">Copyright &copy; 2004-2006 Maciej
Sobczak, Stephen Hutton<br>
<br>
</body>
</html>
