COMPILER = g++
CXXFLAGS = -Wall -pedantic -Wno-long-long -g
INCLUDEDIRS = -I.. -I../backends -I/usr/local/mysql/include/
LIBDIRS = -L/usr/local/mysql/lib
LIBS = -lmysqlclient -lz


test-mysql : test-mysql.o ../soci.o ../backends/soci-mysql.o
	${COMPILER} -o $@ test-mysql.o ../soci.o ../backends/soci-mysql.o ${LIBDIRS} ${LIBS}

test-mysql.o : test-mysql.cpp ../soci.h
	${COMPILER} -c test-mysql.cpp ${CXXFLAGS} ${INCLUDEDIRS}

../soci.o : ../soci.cpp ../soci.h
	${COMPILER} -c -o $@ ../soci.cpp ${CXXFLAGS} ${INCLUDEDIRS}

../backends/soci-mysql.o : ../backends/soci-mysql.cpp ../backends/soci-mysql.h ../soci.h
	${COMPILER} -c -o $@ ../backends/soci-mysql.cpp ${CXXFLAGS} ${INCLUDEDIRS}


clean :
	rm -f test-mysql test-mysql.o
